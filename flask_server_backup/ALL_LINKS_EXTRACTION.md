# üîó –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞

## üéØ –¶–µ–ª—å

–ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∫–æ–¥ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö —Å—Å—ã–ª–∫–∞—Ö –≤ –±–∞–ª—É–Ω–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫**

–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `extractDataFromHTML()` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫:

```javascript
// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞
addLog('üîó –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞...', 'info');

// –ò—â–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –±–∞–ª—É–Ω–µ
const balloonLinks = document.querySelectorAll('.ymaps-2-1-79-balloon a, .ymaps-balloon a, .balloon a');

addLog(`üîç –ù–∞–π–¥–µ–Ω–æ —Å—Å—ã–ª–æ–∫ –≤ –±–∞–ª—É–Ω–µ: ${balloonLinks.length}`, 'info');

// –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
const allLinkTexts = [];

// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
balloonLinks.forEach((link, index) => {
    const linkText = link.textContent.trim();
    const linkHref = link.href || '–Ω–µ—Ç href';
    
    if (linkText && linkText.length > 0) {
        allLinkTexts.push(linkText);
        addLog(`üîó –°—Å—ã–ª–∫–∞ ${index + 1}: "${linkText}" (href: ${linkHref})`, 'info');
    }
});

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ —Ç–µ–∫—Å—Ç—ã —Å—Å—ã–ª–æ–∫ –≤ extractedData
extractedData.all_links = allLinkTexts;
extractedData.links_count = allLinkTexts.length;

addLog(`üìä –í—Å–µ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ —Å—Å—ã–ª–æ–∫: ${allLinkTexts.length}`, 'success');
addLog(`üìù –¢–µ–∫—Å—Ç—ã –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫: ${allLinkTexts.join(' | ')}`, 'info');

// –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏, –±–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ
if (allLinkTexts.length > 0) {
    extractedData.name = allLinkTexts[0];
    addLog(`üè™ –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∑—è—Ç–æ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Å—ã–ª–∫–∏: ${extractedData.name}`, 'success');
    nameFound = true;
} else {
    addLog('‚ö†Ô∏è –°—Å—ã–ª–∫–∏ –≤ –±–∞–ª—É–Ω–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'warning');
}
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö**

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ `sendDataToServer`:

```javascript
const safeData = {
    geoObject: {
        name: geoObjectData.name,
        address: geoObjectData.address,
        phone: geoObjectData.phone,
        website: geoObjectData.website,
        hours: geoObjectData.hours,
        rating: geoObjectData.rating,
        reviews_count: geoObjectData.reviews_count,
        description: geoObjectData.description,
        type: geoObjectData.type,
        lat: geoObjectData.lat,
        lng: geoObjectData.lng,
        full_properties: geoObjectData.full_properties || {},
        all_links: geoObjectData.all_links || [],
        links_count: geoObjectData.links_count || 0
    },
    balloonData: {
        content: balloonData.content ? balloonData.content.substring(0, 1000) : '',
        properties: balloonData.properties || {}
    },
    htmlContent: limitedHtmlContent
};
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ `displayExtractedData`:

```javascript
const fields = [
    { label: '–ù–∞–∑–≤–∞–Ω–∏–µ', key: 'name' },
    { label: '–ê–¥—Ä–µ—Å', key: 'address' },
    { label: '–¢–µ–ª–µ—Ñ–æ–Ω', key: 'phone' },
    { label: '–í–µ–±-—Å–∞–π—Ç', key: 'website' },
    { label: '–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã', key: 'hours' },
    { label: '–†–µ–π—Ç–∏–Ω–≥', key: 'rating' },
    { label: '–û—Ç–∑—ã–≤—ã', key: 'reviews_count' },
    { label: '–û–ø–∏—Å–∞–Ω–∏–µ', key: 'description' },
    { label: '–¢–∏–ø', key: 'type' },
    { label: '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã', key: 'coords' },
    { label: '–í—Å–µ —Å—Å—ã–ª–∫–∏', key: 'all_links' },
    { label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Å—ã–ª–æ–∫', key: 'links_count' }
];
```

## üîç –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫**
- –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –≤ –±–∞–ª—É–Ω–µ
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤ `all_links`

### 2. **–ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞**
- –ü–æ–∫–∞–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ href –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ**
- –ü–µ—Ä–≤–∞—è —Å—Å—ã–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ–º
- Fallback –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

### 4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
- –ü–æ–∫–∞–∑ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Å—ã–ª–æ–∫
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å—Å–∏–≤–∞ —Å—Å—ã–ª–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
python app.py
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞—Ä—Å–µ—Ä:
```
http://localhost:5000/balloon-parser
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ:
- –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –º–µ—Ç–∫—É
- –ù–∞–∂–º–∏—Ç–µ "üéØ –ò–∑–≤–ª–µ—á—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –±–∞–ª—É–Ω–∞"

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Å—ã–ª–∫–∞—Ö:
```
10:44:30: üîó –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞...
10:44:30: üîç –ù–∞–π–¥–µ–Ω–æ —Å—Å—ã–ª–æ–∫ –≤ –±–∞–ª—É–Ω–µ: 3
10:44:30: üîó –°—Å—ã–ª–∫–∞ 1: "–°–µ–ª—ë–¥–æ—á–Ω–∞—è" (href: https://yandex.ru/maps/...)
10:44:30: üîó –°—Å—ã–ª–∫–∞ 2: "Share" (href: https://yandex.ru/maps/...)
10:44:30: üîó –°—Å—ã–ª–∫–∞ 3: "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" (href: https://yandex.ru/maps/...)
10:44:30: üìä –í—Å–µ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ —Å—Å—ã–ª–æ–∫: 3
10:44:30: üìù –¢–µ–∫—Å—Ç—ã –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫: –°–µ–ª—ë–¥–æ—á–Ω–∞—è | Share | –ü–æ–¥—Ä–æ–±–Ω–µ–µ
10:44:30: üè™ –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∑—è—Ç–æ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Å—ã–ª–∫–∏: –°–µ–ª—ë–¥–æ—á–Ω–∞—è
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ:
```
–ù–ê–ó–í–ê–ù–ò–ï: –°–µ–ª—ë–¥–æ—á–Ω–∞—è
–ê–î–†–ï–°: –ú–æ—Å–∫–≤–∞, –í–æ–∑–Ω–µ—Å–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—É–ª–æ–∫, 5—Å1
–¢–ï–õ–ï–§–û–ù: 82556075194
–í–ï–ë-–°–ê–ô–¢: http://sharecafe.ru/
–ß–ê–°–´ –†–ê–ë–û–¢–´: –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 00:00
–†–ï–ô–¢–ò–ù–ì: 4.8
–ö–û–õ–ò–ß–ï–°–¢–í–û –û–¢–ó–´–í–û–í: –û—Ç–∑—ã–≤—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã
–¢–ò–ü: venue
–û–ü–ò–°–ê–ù–ò–ï: –û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
–ö–û–û–†–î–ò–ù–ê–¢–´: 55.7558, 37.6176
–í–°–ï –°–°–´–õ–ö–ò: –°–µ–ª—ë–¥–æ—á–Ω–∞—è | Share | –ü–æ–¥—Ä–æ–±–Ω–µ–µ
–ö–û–õ–ò–ß–ï–°–¢–í–û –°–°–´–õ–û–ö: 3
```

### ‚ùå –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–ª—É–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Å—ã–ª–æ–∫

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–û—Ç–ª–∞–¥–∫–∞ —Å—Å—ã–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞**
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –±–∞–ª—É–Ω–µ
const balloonLinks = document.querySelectorAll('.ymaps-2-1-79-balloon a, .ymaps-balloon a, .balloon a');
console.log('–í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –±–∞–ª—É–Ω–µ:', balloonLinks.length);
balloonLinks.forEach((link, i) => {
    console.log(`–°—Å—ã–ª–∫–∞ ${i + 1}: "${link.textContent.trim()}" -> ${link.href}`);
});
```

### 2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫**
```javascript
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –ø–æ —Ç–∏–ø—É
const filteredLinks = Array.from(balloonLinks).filter(link => {
    const text = link.textContent.trim();
    return text.length > 2 && !text.includes('Share');
});
console.log('–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏:', filteredLinks.map(l => l.textContent.trim()));
```

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! –¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä:

- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –∏–∑ –±–∞–ª—É–Ω–∞
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–≤—É—é —Å—Å—ã–ª–∫—É –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ —Å–Ω–æ–≤–∞ - —Ç–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –∏–∑ –±–∞–ª—É–Ω–∞! üîó** 