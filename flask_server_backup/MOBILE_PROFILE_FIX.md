# üì± –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–° –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª–∞ –∏—Ö –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞–Ω–∫–µ—Ç—É –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π.

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
–í –∫–æ–¥–µ –±—ã–ª–∞ –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã –ø–æ `user_id` cookie –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞–Ω–∫–µ—Ç—ã:

```python
# –°—Ç–∞—Ä–∞—è –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞
if user_id:
    existing_profile = Profile.query.get(user_id)
    if existing_profile:
        return jsonify({
            'success': False,
            'error': '–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–Ω–∫–µ—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∞–Ω–∫–µ—Ç—É.',
            'has_active_profile': True
        }), 400
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò–∑–º–µ–Ω–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞**
```python
# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞–Ω–∫–µ—Ç—É
if user_id:
    existing_profile = Profile.query.get(user_id)
    if existing_profile:
        return jsonify({
            'success': True,
            'user_id': user_id,
            'redirect': url_for('view_profile', id=user_id),
            'message': '–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–Ω–∫–µ—Ç–∞. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å.'
        })
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω—ã API endpoints**
- `POST /api/clear-user-cookie` - –æ—á–∏—Å—Ç–∫–∞ cookie –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/check-profile/<user_id>` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã

### 3. **–£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞–Ω–∫–µ—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞–Ω–∫–µ—Ç—ã
function checkExistingProfile() {
    const userCookie = getCookie('user_id');
    if (userCookie) {
        fetch(`/api/check-profile/${userCookie}`)
            .then(response => response.json())
            .then(data => {
                if (data.success && data.exists) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏ cookie
                    const cookieControls = document.getElementById('cookie-controls');
                    if (cookieControls) {
                        cookieControls.style.display = 'block';
                    }
                }
            });
    }
}

// –û—á–∏—Å—Ç–∫–∞ cookie
function clearUserCookie() {
    fetch('/api/clear-user-cookie', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('‚úÖ –°–µ—Å—Å–∏—è –æ—á–∏—â–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É.');
            window.location.reload();
        }
    });
}
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –ª–æ–≥–∏–∫–∞** - —Å–∏—Å—Ç–µ–º–∞ –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–Ω–∫–µ—Ç
2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É
3. **–£–ª—É—á—à–µ–Ω UX** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–Ω–æ–ø–∫–∏
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–Ω–∫–µ—Ç—ã

### üì± –ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∞–Ω–∫–µ—Ç—É –∫–∞–∫ –æ–±—ã—á–Ω–æ
2. **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏
3. **–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É
4. **–ë–µ–∑ –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏** - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞–Ω–∫–µ—Ç—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∞–Ω–∫–µ—Ç—ã
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∫–µ—Ç—É
3. ‚úÖ –ê–Ω–∫–µ—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É
2. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏
3. –ù–∞–∂–º–∏—Ç–µ "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É"
4. ‚úÖ –°–µ—Å—Å–∏—è –æ—á–∏—â–∞–µ—Ç—Å—è, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë–µ–∑ –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–∏
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏
2. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞–Ω–∫–µ—Ç—É

## üîó API Endpoints

### –û—á–∏—Å—Ç–∫–∞ cookie
```http
POST /api/clear-user-cookie
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Cookie –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—á–∏—â–µ–Ω"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–∫–µ—Ç—ã
```http
GET /api/check-profile/<user_id>
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "exists": true,
  "user_id": "user123"
}
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

- **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**: 1 (`app.py`)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ API endpoints**: 2
- **–î–æ–±–∞–≤–ª–µ–Ω–æ JavaScript —Ñ—É–Ω–∫—Ü–∏–π**: 3
- **–£–ª—É—á—à–µ–Ω UI**: ‚úÖ
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: ‚úÖ

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç (—Å –æ—á–∏—Å—Ç–∫–æ–π —Å–µ—Å—Å–∏–∏)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–Ω–∫–µ—Ç
- ‚úÖ –£–¥–æ–±–Ω—É—é –æ—á–∏—Å—Ç–∫—É —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –†–∞–±–æ—Ç—É –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (–º–æ–±–∏–ª—å–Ω—ã–µ, –¥–µ—Å–∫—Ç–æ–ø)

## ‚úÖ –°—Ç–∞—Ç—É—Å
- **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞** ‚úÖ
- **–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω** ‚úÖ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ** ‚úÖ
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞** ‚úÖ 