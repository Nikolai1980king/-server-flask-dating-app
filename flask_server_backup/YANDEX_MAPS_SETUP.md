# Настройка Яндекс Карт для приложения знакомств

## Шаг 1: Получение API ключа

1. Перейдите на [Яндекс.Карты для разработчиков](https://developer.tech.yandex.ru/)
2. Создайте аккаунт или войдите в существующий
3. Перейдите в раздел "API Карт"
4. Создайте новое приложение
5. Получите API ключ

## Шаг 2: Обновление кода

Замените `YOUR_API_KEY` в файле `app.py` на ваш реальный API ключ:

```javascript
<script src="https://api-maps.yandex.ru/2.1/?apikey=9a3beffb-a8a0-4d55-850f-d258dd28c104&lang=ru_RU" type="text/javascript"></script>
```

## Шаг 3: Обновление базы данных

После добавления новых полей в модель Profile, выполните миграцию базы данных:

```bash
# Удалите старую базу данных (если нужно)
rm instance/dating_app.db

# Запустите приложение - база данных создастся автоматически
python app.py
```

## Функциональность

### Что добавлено:

1. **Интерактивная карта** - пользователи могут кликать на карту для выбора местоположения
2. **Автоматическое определение местоположения** - кнопка для получения текущих координат
3. **Обратное геокодирование** - автоматическое получение адреса по координатам
4. **Сохранение координат** - координаты сохраняются в базе данных
5. **Визуальная обратная связь** - метка на карте и информация о выбранном месте

### Как это работает:

1. При создании анкеты пользователь видит карту
2. Может кликнуть на карту для выбора места или нажать кнопку "Определить мое местоположение"
3. Координаты автоматически сохраняются в скрытых полях формы
4. При отправке формы координаты сохраняются в базе данных

## Безопасность

- API ключ должен быть защищен и не должен попадать в публичный репозиторий
- Рекомендуется использовать переменные окружения для хранения API ключа

## Ограничения

- Для работы геолокации требуется HTTPS соединение
- Пользователь должен разрешить доступ к местоположению в браузере
- Яндекс Карты имеют лимиты на количество запросов (зависит от тарифного плана)

## Дополнительные возможности

В будущем можно добавить:
- Поиск по адресу
- Фильтрация пользователей по расстоянию
- Отображение расстояния между пользователями
- Рекомендации на основе местоположения 