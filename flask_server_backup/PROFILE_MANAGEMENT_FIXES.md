# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∫–µ—Ç

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∫–µ—Ç, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
- –°–ø–∞–º—É –≤ —Å–∏—Å—Ç–µ–º–µ
- –ù–∞—Ä—É—à–µ–Ω–∏—é –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–±–ª–µ–º–∞–º —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã–º–∏

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ –æ–¥–Ω–æ–π –∞–Ω–∫–µ—Ç—ã –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

#### 1. **–§—É–Ω–∫—Ü–∏—è `create_profile()` (—Å—Ç—Ä–æ–∫–∏ 730-740)**

**–ë—ã–ª–æ:**
```python
# –í—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π ID –¥–ª—è –∫–∞–∂–¥–æ–π –∞–Ω–∫–µ—Ç—ã
# –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–Ω–∫–µ—Ç
user_id = str(uuid.uuid4())
```

**–°—Ç–∞–ª–æ:**
```python
# –ü–æ–ª—É—á–∞–µ–º user_id –∏–∑ cookie –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
user_id = request.cookies.get('user_id')

if request.method == 'POST':
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∞–Ω–∫–µ—Ç–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if user_id:
    existing_profile = Profile.query.get(user_id)
    if existing_profile:
            return jsonify({
                'success': False,
                'error': '–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–Ω–∫–µ—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∞–Ω–∫–µ—Ç—É.',
                'has_active_profile': True
            }), 400
```

#### 2. **–î–æ–±–∞–≤–ª–µ–Ω API endpoint `/api/check-profile`**

```python
@app.route('/api/check-profile')
def check_profile():
    user_id = request.cookies.get('user_id')
    if not user_id:
        return jsonify({
            'has_profile': False,
            'message': '–ù–µ—Ç user_id –≤ cookie'
        })
    
    profile = Profile.query.get(user_id)
    if profile:
        return jsonify({
            'has_profile': True,
            'profile_id': profile.id,
            'name': profile.name,
            'age': profile.age,
            # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
        })
    else:
        return jsonify({
            'has_profile': False,
            'message': '–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'
        })
```

#### 3. **–°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `test_single_profile_limit.html`**

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–Ω–∫–µ—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–Ω–∫–µ—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞–Ω–∫–µ—Ç—ã
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞–Ω–∫–µ—Ç—ã
- –û—á–∏—Å—Ç–∫–∞ cookie

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∞–Ω–∫–µ—Ç—ã:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/create`
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç cookie `user_id`
3. –ï—Å–ª–∏ cookie –Ω–µ—Ç - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π ID
4. –ê–Ω–∫–µ—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è cookie —Å ID –∞–Ω–∫–µ—Ç—ã

### –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/create`
2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç cookie `user_id`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–Ω–∫–µ—Ç—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. **–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ** —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ

### –£–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å –∞–Ω–∫–µ—Ç—É" –≤ `/my_profile`
2. –£–¥–∞–ª—è–µ—Ç—Å—è –∞–Ω–∫–µ—Ç–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –£–¥–∞–ª—è–µ—Ç—Å—è cookie `user_id`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `/test_single_profile_limit.html`

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ –ü–µ—Ä–≤–∞—è –∞–Ω–∫–µ—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚ùå –í—Ç–æ—Ä–∞—è –∞–Ω–∫–µ—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
- üîÑ –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/test_single_profile_limit.html`
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∞–Ω–∫–µ—Ç—É
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –æ—à–∏–±–∫–∞
4. –£–¥–∞–ª–∏—Ç–µ –∞–Ω–∫–µ—Ç—É
5. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é - –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è

## üìã API Endpoints

### `GET /api/check-profile`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–Ω–∫–µ—Ç—ã —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Ç–≤–µ—Ç:**
```json
{
    "has_profile": true,
    "profile_id": "uuid",
    "name": "–ò–º—è",
    "age": 25,
    "gender": "male",
    "hobbies": "–°–ø–æ—Ä—Ç",
    "goal": "friendship",
    "city": "–ú–æ—Å–∫–≤–∞",
    "venue": "–ö–∞—Ñ–µ",
    "created_at": "2024-01-01T12:00:00"
}
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–π –∞–Ω–∫–µ—Ç–æ–π**
- ‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è**
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è**
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**
- ‚úÖ **–ò–º–µ–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–Ω–∫–µ—Ç, –º–æ–∂–Ω–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏—é** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–Ω–∫–µ—Ç
2. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–∞ –∞–Ω–∫–µ—Ç–∞ –≤ –¥–µ–Ω—å)
3. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–Ω–∫–µ—Ç
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∞–Ω–∫–µ—Ç** (–æ—Å–Ω–æ–≤–Ω–∞—è + –≤—Ä–µ–º–µ–Ω–Ω—ã–µ)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–Ω–∫–µ—Ç—ã –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∞–Ω–∫–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã 