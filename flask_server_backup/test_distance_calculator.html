<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–¢–µ—Å—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            color: white;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
        }

        .test-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            color: #333;
        }

        .btn {
            background: linear-gradient(90deg, #4CAF50 0%, #81c784 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin: 10px;
        }

        .btn:hover {
            box-shadow: 0 4px 16px rgba(76,175,80,0.3);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(90deg, #2196F3 0%, #64B5F6 100%);
        }

        .btn-warning {
            background: linear-gradient(90deg, #FF9800 0%, #FFB74D 100%);
        }

        .result {
            background: linear-gradient(135deg, #4CAF50 0%, #81c784 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }

        .error {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }

        .info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è</h1>
        
        <div class="test-section">
            <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</h3>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ "üß≠ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</li>
                <li>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "üìç –¢–µ—Å—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ "üìè –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è" –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã:</h3>
            <button class="btn btn-secondary" onclick="openDistanceCalculator()">
                üß≠ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
            </button>
            <button class="btn btn-warning" onclick="testGeolocation()">
                üìç –¢–µ—Å—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
            </button>
            <button class="btn" onclick="testDistanceCalculation()">
                üìè –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
            </button>
        </div>

        <div id="test-results"></div>

        <div class="info">
            <h3>üìñ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:</h3>
            <ul>
                <li><strong>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è:</strong> –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                <li><strong>–ö–∞—Ä—Ç–∞:</strong> –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç</li>
                <li><strong>–û–±—ä–µ–∫—Ç—ã:</strong> –°–æ–∑–¥–∞–Ω–∏–µ –∏ –≤—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ</li>
                <li><strong>–†–∞—Å—á–µ—Ç—ã:</strong> –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è</li>
                <li><strong>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:</strong> –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏–Ω–∏–π –∏ –º–µ—Ç–æ–∫</li>
            </ul>
        </div>

        <div class="info">
            <h3>üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:</h3>
            <ul>
                <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTML5 Geolocation API</li>
                <li>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç</li>
                <li>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é</li>
                <li>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JavaScript ES6+</li>
            </ul>
        </div>
    </div>

    <script>
        function openDistanceCalculator() {
            window.open('/distance-calculator', '_blank');
            showResult('‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ', 'success');
        }

        function testGeolocation() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="info">üìç –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é...</div>';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const distance = calculateHaversineDistance(
                            position.coords.latitude, position.coords.longitude,
                            55.7558, 37.6176 // –ú–æ—Å–∫–≤–∞
                        );
                        
                        resultsDiv.innerHTML = `
                            <div class="result">
                                ‚úÖ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!<br>
                                –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${position.coords.latitude.toFixed(6)}, ${position.coords.longitude.toFixed(6)}<br>
                                –¢–æ—á–Ω–æ—Å—Ç—å: ¬±${position.coords.accuracy} –º–µ—Ç—Ä–æ–≤<br>
                                –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ú–æ—Å–∫–≤—ã: ${distance.toFixed(2)} –∫–º
                            </div>
                        `;
                    },
                    function(error) {
                        let errorMessage = '';
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = '‚ùå –î–æ—Å—Ç—É–ø –∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –∑–∞–ø—Ä–µ—â–µ–Ω';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = '‚ùå –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
                                break;
                            case error.TIMEOUT:
                                errorMessage = '‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è';
                                break;
                            default:
                                errorMessage = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
                        }
                        resultsDiv.innerHTML = `<div class="error">${errorMessage}</div>`;
                    },
                    {
                        enableHighAccuracy: false,
                        timeout: 10000,
                        maximumAge: 60000
                    }
                );
            } else {
                resultsDiv.innerHTML = '<div class="error">‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</div>';
            }
        }

        function testDistanceCalculation() {
            const resultsDiv = document.getElementById('test-results');
            
            // –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            const testCases = [
                {
                    name: '–ú–æ—Å–∫–≤–∞ - –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
                    lat1: 55.7558, lon1: 37.6176,
                    lat2: 59.9311, lon2: 30.3609,
                    expected: 635 // –ø—Ä–∏–º–µ—Ä–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
                },
                {
                    name: '–ú–æ—Å–∫–≤–∞ - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',
                    lat1: 55.7558, lon1: 37.6176,
                    lat2: 56.8519, lon2: 60.6122,
                    expected: 1800 // –ø—Ä–∏–º–µ—Ä–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
                },
                {
                    name: '–ë–ª–∏–∑–∫–∏–µ —Ç–æ—á–∫–∏ (1 –∫–º)',
                    lat1: 55.7558, lon1: 37.6176,
                    lat2: 55.7648, lon2: 37.6276,
                    expected: 1 // –ø—Ä–∏–º–µ—Ä–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
                }
            ];

            let results = '<div class="info">üìè –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π...</div>';
            
            testCases.forEach(testCase => {
                const calculated = calculateHaversineDistance(
                    testCase.lat1, testCase.lon1,
                    testCase.lat2, testCase.lon2
                );
                
                const accuracy = Math.abs(calculated - testCase.expected) / testCase.expected * 100;
                const status = accuracy < 10 ? '‚úÖ' : '‚ö†Ô∏è';
                
                results += `
                    <div class="result">
                        ${status} ${testCase.name}<br>
                        –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ: ${calculated.toFixed(2)} –∫–º<br>
                        –û–∂–∏–¥–∞–ª–æ—Å—å: ~${testCase.expected} –∫–º<br>
                        –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å: ${accuracy.toFixed(1)}%
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = results;
        }

        function calculateHaversineDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function showResult(message, type) {
            const resultsDiv = document.getElementById('test-results');
            const className = type === 'success' ? 'result' : 'error';
            resultsDiv.innerHTML = `<div class="${className}">${message}</div>`;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="info">üîÑ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –≤—ã—à–µ.</div>';
        };
    </script>
</body>
</html> 