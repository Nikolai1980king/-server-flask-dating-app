<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∞–Ω–∫–µ—Ç</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .btn {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 25px;
            margin: 10px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(45deg, #6c757d, #495057);
        }
        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        .status {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .error {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .info {
            background: rgba(23, 162, 184, 0.2);
            border: 1px solid #17a2b8;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .result {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∞–Ω–∫–µ—Ç</h1>
        
        <div class="status">
            <h3>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ–¥—Ä–µ–Ω—ã:</h3>
            <ul>
                <li>–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∞–Ω–∫–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 7 –¥–Ω–µ–π (168 —á–∞—Å–æ–≤)</li>
                <li>–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∞–Ω–∫–µ—Ç</li>
                <li>–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∫–µ—Ç</li>
                <li>–°–æ–∑–¥–∞–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏</h3>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:</p>
            <div class="result">python manage_profile_lifetime.py show</div>
            <div class="result">python manage_profile_lifetime.py change 168</div>
            <div class="result">python manage_profile_lifetime.py disable</div>
            <div class="result">python manage_profile_lifetime.py enable</div>
            <div class="result">python manage_profile_lifetime.py cleanup</div>
        </div>

        <div class="test-section">
            <h3>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:</p>
            <a href="/create" class="btn">üìù –°–æ–∑–¥–∞—Ç—å –∞–Ω–∫–µ—Ç—É</a>
            <a href="/visitors" class="btn">üë• –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∫–µ—Ç—ã</a>
            <button onclick="testDuplicateCreation()" class="btn btn-secondary">üîÑ –¢–µ—Å—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è</button>
            <button onclick="checkCurrentSettings()" class="btn btn-success">‚öôÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>

        <div class="test-section">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤</h3>
            <div id="test-results"></div>
        </div>

        <div class="info">
            <h3>‚ÑπÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:</h3>
            <ol>
                <li><strong>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∞–Ω–∫–µ—Ç—ã:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∞–Ω–∫–µ—Ç—É, –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID</li>
                <li><strong>–ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∫–µ—Ç—É:</strong> –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∫–µ—Ç—ã</li>
                <li><strong>–ï—Å–ª–∏ –∞–Ω–∫–µ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞:</strong> –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∫–µ—Ç–∞"</li>
                <li><strong>–ï—Å–ª–∏ –∞–Ω–∫–µ—Ç–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞:</strong> –ü–æ–∑–≤–æ–ª—è–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É</li>
                <li><strong>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã:</strong> –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∞–Ω–∫–µ—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
            <ul>
                <li>‚úÖ –ê–Ω–∫–µ—Ç—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞</li>
                <li>‚úÖ –ê–Ω–∫–µ—Ç—ã –∂–∏–≤—É—Ç 7 –¥–Ω–µ–π (168 —á–∞—Å–æ–≤)</li>
                <li>‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∞–Ω–∫–µ—Ç—ã</li>
                <li>‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö</li>
                <li>‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <a href="/" class="btn">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a href="/create" class="btn">üìù –°–æ–∑–¥–∞—Ç—å –∞–Ω–∫–µ—Ç—É</a>
        </div>
    </div>

    <script>
        function testDuplicateCreation() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<div class="info">üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–µ–π –∞–Ω–∫–µ—Ç—ã...</div>';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è cookie —Å user_id
            const userCookie = document.cookie.split(';').find(c => c.trim().startsWith('user_id='));
            
            if (userCookie) {
                const userId = userCookie.split('=')[1];
                results.innerHTML += `<div class="status">‚úÖ –ù–∞–π–¥–µ–Ω cookie user_id: ${userId}</div>`;
                results.innerHTML += `<div class="info">‚ÑπÔ∏è –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞–Ω–∫–µ—Ç—É –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –æ—à–∏–±–∫–∞ –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∫–µ—Ç–µ</div>`;
                results.innerHTML += `<div class="info">üí° –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</div>`;
            } else {
                results.innerHTML += `<div class="info">‚ÑπÔ∏è Cookie user_id –Ω–µ –Ω–∞–π–¥–µ–Ω</div>`;
                results.innerHTML += `<div class="info">üí° –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∞–Ω–∫–µ—Ç—É, –∑–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é</div>`;
            }
        }

        function checkCurrentSettings() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<div class="info">‚öôÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫...</div>';
            
            fetch('/api/profiles')
                .then(response => response.json())
                .then(data => {
                    results.innerHTML += `<div class="status">üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∫–µ—Ç –≤ –±–∞–∑–µ: ${data.count}</div>`;
                    results.innerHTML += `<div class="status">‚è∞ –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: 168 —á–∞—Å–æ–≤ (7 –¥–Ω–µ–π)</div>`;
                    results.innerHTML += `<div class="status">‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ: –≤–∫–ª—é—á–µ–Ω–æ</div>`;
                })
                .catch(error => {
                    results.innerHTML += `<div class="error">‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: ${error}</div>`;
                });
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            checkCurrentSettings();
        };
    </script>
</body>
</html> 