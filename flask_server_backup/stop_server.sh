#!/bin/bash

echo "๐ ะััะฐะฝะพะฒะบะฐ Flask ัะตัะฒะตัะฐ..."

# ะััะฐะฝะพะฒะธัั ะฒัะต ะฟัะพัะตััั Python app.py
echo "๐ ะััะฐะฝะพะฒะบะฐ ะฟัะพัะตััะพะฒ python app.py..."
pkill -f "python app.py" 2>/dev/null || true

# ะะพะดะพะถะดะฐัั 2 ัะตะบัะฝะดั
sleep 2

# ะัะธะฝัะดะธัะตะปัะฝะพ ะพัะฒะพะฑะพะดะธัั ะฟะพัั 5000
echo "๐ ะัะฒะพะฑะพะถะดะตะฝะธะต ะฟะพััะฐ 5000..."
lsof -ti:5000 | xargs kill -9 2>/dev/null || true

# ะัะพะฒะตัะธัั, ััะพ ะฒัะต ะพััะฐะฝะพะฒะปะตะฝะพ
if pgrep -f "python app.py" >/dev/null; then
    echo "โ ะะต ัะดะฐะปะพัั ะพััะฐะฝะพะฒะธัั ะฒัะต ะฟัะพัะตััั"
else
    echo "โ ะัะต ะฟัะพัะตััั ะพััะฐะฝะพะฒะปะตะฝั"
fi

if lsof -i:5000 >/dev/null 2>&1; then
    echo "โ ะะพัั 5000 ะฒัะต ะตัะต ะทะฐะฝัั"
else
    echo "โ ะะพัั 5000 ัะฒะพะฑะพะดะตะฝ"
fi

echo "๐ ะะพัะพะฒะพ!" 